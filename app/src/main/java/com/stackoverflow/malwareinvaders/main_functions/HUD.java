package com.stackoverflow.malwareinvaders.main_functions;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Typeface;

/**
 * Created by waiyu on 7/31/19.
 */

class HUD {
    private int mScreenX;
    private int mScreenY;
    private Context mContext;
    Typeface mTypeface;
    private int mFontSize;
    private int mFontMarginX;
    private int mFontMarginY;
    private float heartWidth;
    private float heartHeight;
    private float left;
    private float top;


    HUD(Typeface typeface, int FontSize, int FontMarginX, int FontMarginY, Context context,int ScreenX,int ScreenY) {
        mTypeface = typeface;
        mFontSize = FontSize;
        mFontMarginX = FontMarginX;
        mFontMarginY = FontMarginY;
        mContext = context;
        mScreenX = ScreenX;
        mScreenY = ScreenY;

        heartWidth = (mScreenX/20);
        heartHeight = (mScreenY/30);
        left = mScreenX - (mFontMarginX + (heartWidth * 3));
        top = mFontMarginY/2;
    }

    void draw(Canvas mCanvas, Paint mPaint,int mLives,int mScore){

        mPaint.setTypeface(mTypeface);
        mPaint.setColor(Color.WHITE); // Could be changed later
        // Choose the font size
        mPaint.setTextSize(mFontSize);
        mCanvas.drawText("Scores: ", mFontMarginX, mFontMarginY, mPaint);
        float score_width = mPaint.measureText("Scores: ");
        mPaint.setColor(Color.YELLOW); // Could be changed later
        mCanvas.drawText(""+ mScore, mFontMarginX + score_width, mFontMarginY, mPaint);

        float lives_width = mPaint.measureText("Lives: ");
        mPaint.setColor(Color.WHITE); // Could be changed later
        mCanvas.drawText("Lives: ",left - lives_width,mFontMarginY,mPaint);

        Bitmap img = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.hearts);
        Bitmap resizedImg = Bitmap.createScaledBitmap(img, (int)heartWidth, (int)heartHeight, true);

        for (int cnt = 0, i = 0, j = 0; cnt<mLives; cnt++, i++){
            // Only at max 3 lives are shown per line
            if(cnt%3 == 0){
                i=0;
                j++;
            }
            mCanvas.drawBitmap(resizedImg, left + (heartWidth * i), top * j, mPaint);
        }
    }


}
